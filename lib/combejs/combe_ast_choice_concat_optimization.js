 // Generated by Combe/JS Bootstrap Compiler

var extend = require('./util').extend;
var BaseParser = require('./base_parser');
var Range = require('./range');

var CombeASTChoiceConcatOptimization = module.exports = function () {
  BaseParser.call(this);
};

extend((CombeASTChoiceConcatOptimization.prototype = Object.create(BaseParser.prototype)), {

'recur': function () {
var result;
return this._apply((function () {return this._concat((function () {return this._destructure((function () {result = this._apply(this.transform);}));}), (function () {return ( result
  );}));}));
},

'transform': function () {
var name, rules, args, vars, expr, exprs, jsExpr, argExprs, leftExpr, rightExpr, string, number, jsCode;
return this._apply((function () {return this._choice((function () {return this._concat((function () {return this._concat('Grammar', (function () {name = this._apply((function () {return this._apply(this.anything);}));}), (function () {return this._destructure((function () {rules = this._apply((function () {return this._repeat(this.recur);}));}));}));}), (function () {return ( ['Grammar', name, rules]
    
    );}));}),
(function () {return this._concat((function () {return this._concat('Rule', (function () {name = this._apply((function () {return this._apply(this.anything);}));}), (function () {args = this._apply((function () {return this._apply(this.anything);}));}), (function () {vars = this._apply((function () {return this._apply(this.anything);}));}), (function () {expr = this._apply(this.recur);}));}), (function () {return ( ['Rule', name, args, vars, expr]
    
    );}));}),
(function () {return this._concat((function () {return this._concat('Choice', (function () {exprs = this._apply((function () {return this._repeat1((function () {return this._concat((function () {expr = this._apply(this.recur);}), (function () {
          if (expr[0] === 'Choice') {
            return expr.slice(1);
          } else {
            return [expr];
          }
        }));}));}));}));}), (function () {return ( ['Choice'].concat(exprs.flatten1())
    
    );}));}),
(function () {return this._concat((function () {return this._concat('Concat', (function () {exprs = this._apply((function () {return this._repeat1((function () {return this._concat((function () {expr = this._apply(this.recur);}), (function () {
          if (expr[0] === 'Concat') {
            return expr.slice(1);
          } else {
            return [expr];
          }
        }));}));}));}));}), (function () {return ( ['Concat'].concat(exprs.flatten1())
    
    );}));}),
(function () {return this._concat((function () {return this._concat('Action', (function () {jsExpr = this._apply(this.recur);}));}), (function () {return ( ['Action', jsExpr]
    
    );}));}),
(function () {return this._concat((function () {return this._concat('Bind', (function () {name = this._apply((function () {return this._apply(this.anything);}));}), (function () {expr = this._apply(this.recur);}));}), (function () {return ( ['Bind', name, expr]
    
    );}));}),
(function () {return this._concat((function () {return this._concat('Not', (function () {expr = this._apply(this.recur);}));}), (function () {return ( ['Not', expr]
    
    );}));}),
(function () {return this._concat((function () {return this._concat('Lookahead', (function () {expr = this._apply(this.recur);}));}), (function () {return ( ['Lookahead', expr]
    
    );}));}),
(function () {return this._concat((function () {return this._concat('Repeat', (function () {expr = this._apply(this.recur);}));}), (function () {return ( ['Repeat', expr]
    
    );}));}),
(function () {return this._concat((function () {return this._concat('Repeat1', (function () {expr = this._apply(this.recur);}));}), (function () {return ( ['Repeat1', expr]
    
    );}));}),
(function () {return this._concat((function () {return this._concat('Optional', (function () {expr = this._apply(this.recur);}));}), (function () {return ( ['Optional', expr]
    
    );}));}),
(function () {return this._concat((function () {return this._concat('Token', (function () {expr = this._apply(this.recur);}));}), (function () {return ( ['Token', expr]
    
    );}));}),
(function () {return this._concat((function () {return this._concat('Predicate', (function () {jsExpr = this._apply(this.recur);}));}), (function () {return ( ['Predicate', jsExpr]
    
    );}));}),
(function () {return this._concat((function () {return this._concat('Apply', (function () {expr = this._apply(this.recur);}), (function () {return this._destructure((function () {argExprs = this._apply((function () {return this._repeat(this.recur);}));}));}));}), (function () {return ( ['Apply', expr, argExprs]
                         
    );}));}),
(function () {return this._concat((function () {return this._concat('Apply', (function () {expr = this._apply(this.recur);}));}), (function () {return ( ['Apply', expr]
    
    );}));}),
(function () {return this._concat((function () {return this._concat('ImmediateAction', (function () {jsExpr = this._apply(this.recur);}));}), (function () {return ( ['ImmediateAction', jsExpr]
    
    );}));}),
(function () {return this._concat((function () {return this._concat('Destructure', (function () {expr = this._apply(this.recur);}));}), (function () {return ( ['Destructure', expr]
    
    );}));}),
(function () {return this._concat((function () {return this._concat('Range', (function () {leftExpr = this._apply(this.recur);}), (function () {rightExpr = this._apply(this.recur);}));}), (function () {return ( ['Range', leftExpr, rightExpr]
    
    );}));}),
(function () {return this._concat('Infinity', (function () {return ( ['Infinity']
    
    );}));}),
(function () {return this._concat((function () {return this._concat('String', (function () {string = this._apply((function () {return this._apply(this.anything);}));}));}), (function () {return ( ['String', string]
    
    );}));}),
(function () {return this._concat((function () {return this._concat('Number', (function () {number = this._apply((function () {return this._apply(this.anything);}));}));}), (function () {return ( ['Number', number]
    
    );}));}),
(function () {return this._concat((function () {return this._concat('Variable', (function () {name = this._apply((function () {return this._apply(this.anything);}));}));}), (function () {return ( ['Variable', name]
    
    );}));}),
(function () {return this._concat((function () {return this._concat('Property', (function () {name = this._apply((function () {return this._apply(this.anything);}));}));}), (function () {return ( ['Property', name]
    
    );}));}),
(function () {return this._concat((function () {return this._concat('JSFunction', (function () {jsCode = this._apply((function () {return this._apply(this.anything);}));}));}), (function () {return ( ['JSFunction', jsCode]
    
    );}));}),
(function () {return this._concat((function () {return this._concat('JSExpr', (function () {jsCode = this._apply((function () {return this._apply(this.anything);}));}));}), (function () {return ( ['JSExpr', jsCode]
  );}));}));}));
}

});
